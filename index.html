<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pronouns Grammar Quiz (20 Questions)</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f3f5f9; margin:0; padding:16px; }
    .wrap { max-width: 980px; margin: 0 auto; background:#fff; border-radius:12px; padding:18px 18px 10px; }
    h1 { margin: 0 0 8px; font-size: 20px; }
    .sub { color:#556; margin: 0 0 14px; font-size: 14px; line-height: 1.5; }
    .q { border-top: 1px solid #eee; padding: 14px 4px; }
    .q:first-of-type { border-top: none; }
    .qtitle { display:flex; gap:10px; align-items:flex-start; justify-content:space-between; }
    .sentence { font-size: 16px; line-height: 1.5; margin: 0 0 10px; }
    .controls { display:flex; gap:8px; flex-wrap:wrap; }
    button {
      border: 0; border-radius: 8px; padding: 8px 12px; cursor: pointer;
      background:#2563eb; color:#fff; font-size: 14px;
    }
    button.secondary { background:#64748b; }
    .options { display:flex; flex-wrap:wrap; gap:10px 18px; }
    label { cursor:pointer; }
    .pill {
      display:inline-flex; align-items:center; gap:8px;
      border:2px solid #cfd6e4; border-radius:999px; padding:6px 10px;
      background:#fff;
    }
    .pill.correct { border-color:#22c55e; background:#ecfff4; }
    .pill.wrong { border-color:#ef4444; background:#fff1f0; }
    .hint { margin-top:8px; font-size: 13px; color:#6b7280; }
    .hint.ok { color:#16a34a; font-weight:700; }
    .hint.bad { color:#b91c1c; font-weight:700; }
    .explain { margin-top:6px; font-size: 13px; color:#374151; display:none; }
    .topbar { display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap; }
    .score { font-weight: 800; margin: 10px 0 14px; }
    .answersBox {
      display:none; background:#eef1f7; padding:12px; border-radius:10px; margin: 10px 0 14px;
      font-size: 14px;
    }
    .tiny { font-size: 12px; color:#6b7280; }
    .blank { font-weight: 800; text-decoration: underline; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <div>
        <h1>Pronouns ä»£åè¯è¯­æ³•ç»ƒä¹ ï¼ˆ20é¢˜ï¼‰</h1>
        <p class="sub">
          é¢˜å‹ï¼šå•é€‰é¢˜ï¼ˆé¿å…æ­§ä¹‰ï¼‰ã€‚é€‰æ‹©åä¼šå³æ—¶æç¤ºå¯¹/é”™ã€‚<br>
          ç‚¹å‡» <b>Check All</b> å¯æ˜¾ç¤ºæ€»åˆ†ã€æ­£ç¡®ç­”æ¡ˆä¸ç®€çŸ­è®²è§£ã€‚ç‚¹å‡» ğŸ”Š å¯å¬å¥å­å‘éŸ³ã€‚
        </p>
      </div>
      <div class="controls">
        <button onclick="checkAll()">Check All</button>
        <button class="secondary" onclick="resetAll()">Reset</button>
      </div>
    </div>

    <div id="quiz"></div>

    <div id="score" class="score"></div>
    <div id="answersBox" class="answersBox"></div>
    <p class="tiny">å‘éŸ³åŠŸèƒ½ä½¿ç”¨æµè§ˆå™¨å†…å»ºè¯­éŸ³ï¼ˆWeb Speech APIï¼‰ã€‚æ‰‹æœºä¸Šå¯èƒ½éœ€è¦å…ˆç‚¹ä¸€æ¬¡æŒ‰é’®æ‰ä¼šæ’­æ”¾ã€‚</p>
  </div>

<script>
const questions = [
  {
    sentence: "This is my phone. Please donâ€™t touch _____.",
    options: ["I", "me", "my", "mine", "it"],
    answer: "it",
    explain: "ä»£æ›¿å‰é¢æåˆ°çš„å•æ•°ç‰©å“ï¼ˆmy phoneï¼‰â†’ ç”¨ itã€‚"
  },
  {
    sentence: "Sarah is absent today. I will call ____ later.",
    options: ["she", "her", "hers", "them"],
    answer: "her",
    explain: "åŠ¨è¯ call åè¦ç”¨å®¾æ ¼ â†’ herã€‚"
  },
  {
    sentence: "____ is raining heavily, so we will stay indoors.",
    options: ["It", "He", "They", "This"],
    answer: "It",
    explain: "è°ˆå¤©æ°”/æ—¶é—´/è·ç¦»å¸¸ç”¨ it ä½œå½¢å¼ä¸»è¯­ã€‚"
  },
  {
    sentence: "Tom and I are classmates. ____ study together after school.",
    options: ["We", "Us", "Our", "Ours"],
    answer: "We",
    explain: "å¥å­ä¸»è¯­ä½ç½®ç”¨ä¸»æ ¼ â†’ Weã€‚"
  },
  {
    sentence: "This book is not yours. It is ____.",
    options: ["my", "mine", "me", "I"],
    answer: "mine",
    explain: "be åŠ¨è¯åç”¨åè¯æ€§ç‰©ä¸»ä»£è¯ï¼ˆmine=æˆ‘çš„ä¹¦ï¼‰ã€‚"
  },
  {
    sentence: "Please give the keys to ____.",
    options: ["he", "him", "his", "they"],
    answer: "him",
    explain: "ä»‹è¯ to åç”¨å®¾æ ¼ â†’ himã€‚"
  },
  {
    sentence: "My parents are kind. ____ always support me.",
    options: ["They", "Them", "Their", "Theirs"],
    answer: "They",
    explain: "å¥å­ä¸»è¯­ä½ç½®ç”¨ä¸»æ ¼ â†’ Theyã€‚"
  },
  {
    sentence: "I canâ€™t find my pen. Can I borrow _____?",
    options: ["you", "your", "yours", "yourself"],
    answer: "yours",
    explain: "borrow yours = å€Ÿä½ çš„ï¼ˆç¬”ï¼‰ã€‚åè¯æ€§ç‰©ä¸»ä»£è¯ã€‚"
  },
  {
    sentence: "The teacher asked ____ to be quiet.",
    options: ["we", "us", "our", "ours"],
    answer: "us",
    explain: "asked åè¦ç”¨å®¾æ ¼ â†’ usã€‚"
  },
  {
    sentence: "This is not my seat. It is ____ seat.",
    options: ["he", "him", "his", "hers"],
    answer: "his",
    explain: "ä¿®é¥°åè¯ seat ç”¨å½¢å®¹è¯æ€§ç‰©ä¸»ä»£è¯ hisã€‚"
  },
  {
    sentence: "Anna did the homework by ____.",
    options: ["she", "her", "herself", "hers"],
    answer: "herself",
    explain: "by oneself = ç‹¬è‡ªã€‚åèº«ä»£è¯ herselfã€‚"
  },
  {
    sentence: "I saw John and Mary, and I waved at ____.",
    options: ["they", "them", "their", "theirs"],
    answer: "them",
    explain: "at æ˜¯ä»‹è¯ï¼Œåé¢ç”¨å®¾æ ¼ â†’ themã€‚"
  },
  {
    sentence: "____ laptop is new, but mine is old.",
    options: ["Your", "Yours", "You", "Yourself"],
    answer: "Your",
    explain: "åé¢æœ‰åè¯ laptopï¼Œç”¨å½¢å®¹è¯æ€§ç‰©ä¸»ä»£è¯ yourã€‚"
  },
  {
    sentence: "We enjoyed ____ at the party last night.",
    options: ["we", "us", "our", "ourselves"],
    answer: "ourselves",
    explain: "enjoy oneself = ç©å¾—å¼€å¿ƒã€‚ourselvesã€‚"
  },
  {
    sentence: "Could you help ____ with this problem?",
    options: ["I", "me", "my", "mine"],
    answer: "me",
    explain: "help åç”¨å®¾æ ¼ â†’ meã€‚"
  },
  {
    sentence: "The kids are hungry. Please give ____ some food.",
    options: ["they", "them", "their", "theirs"],
    answer: "them",
    explain: "give åç”¨å®¾æ ¼ â†’ themã€‚"
  },
  {
    sentence: "This is my sister. ____ name is Lily.",
    options: ["Her", "Hers", "She", "Him"],
    answer: "Her",
    explain: "ä¿®é¥°åè¯ name ç”¨å½¢å®¹è¯æ€§ç‰©ä¸»ä»£è¯ herã€‚"
  },
  {
    sentence: "Is this your bag? Yes, itâ€™s ____.",
    options: ["my", "mine", "me", "I"],
    answer: "mine",
    explain: "itâ€™s mine = å®ƒæ˜¯æˆ‘çš„ï¼ˆåŒ…ï¼‰ã€‚åè¯æ€§ç‰©ä¸»ä»£è¯ã€‚"
  },
  {
    sentence: "My brother and I will do it ____.",
    options: ["ourselves", "myself", "himself", "themselves"],
    answer: "ourselves",
    explain: "ä¸»è¯­æ˜¯ my brother and I â†’ ourselvesã€‚"
  },
  {
    sentence: "That man is Mr. Lee. ____ teaches English.",
    options: ["He", "Him", "His", "They"],
    answer: "He",
    explain: "å¥å­ä¸»è¯­ä½ç½®ç”¨ä¸»æ ¼ â†’ Heã€‚"
  },
];

// --- Build UI ---
const quiz = document.getElementById("quiz");

function build() {
  quiz.innerHTML = "";
  questions.forEach((q, idx) => {
    const qDiv = document.createElement("div");
    qDiv.className = "q";
    qDiv.id = `qwrap-${idx}`;

    const sentenceHtml = q.sentence.replace("____", `<span class="blank">____</span>`);

    qDiv.innerHTML = `
      <div class="qtitle">
        <p class="sentence"><b>${idx+1}.</b> ${sentenceHtml}</p>
        <div class="controls">
          <button class="secondary" onclick="speakSentence(${idx})">ğŸ”Š Speak</button>
        </div>
      </div>

      <div class="options" id="opts-${idx}">
        ${q.options.map((opt, j) => `
          <label class="pill" id="pill-${idx}-${j}">
            <input type="radio" name="q${idx}" value="${opt}" />
            ${opt}
          </label>
        `).join("")}
      </div>

      <div class="hint" id="hint-${idx}">Tip: choose the correct pronoun for the blank.</div>
      <div class="explain" id="exp-${idx}">Explanation: ${q.explain}</div>
    `;
    quiz.appendChild(qDiv);

    // add instant feedback listener
    const radios = qDiv.querySelectorAll(`input[name="q${idx}"]`);
    radios.forEach(r => {
      r.addEventListener("change", () => instantCheck(idx));
    });
  });
}

build();

// --- Speech ---
function speakSentence(idx){
  const q = questions[idx];
  // Speak the sentence with the correct answer filled in
  const text = q.sentence.replace("____", q.answer);
  const u = new SpeechSynthesisUtterance(text);
  u.lang = "en-US";
  u.rate = 0.9;
  speechSynthesis.speak(u);
}

// --- Helpers ---
function getSelected(idx){
  const picked = document.querySelector(`input[name="q${idx}"]:checked`);
  return picked ? picked.value : null;
}

function setPillsNeutral(idx){
  const wrap = document.getElementById(`opts-${idx}`);
  wrap.querySelectorAll(".pill").forEach(p => p.classList.remove("correct","wrong"));
}

function instantCheck(idx){
  const picked = getSelected(idx);
  const q = questions[idx];
  const hint = document.getElementById(`hint-${idx}`);
  const exp = document.getElementById(`exp-${idx}`);
  setPillsNeutral(idx);

  if(!picked){
    hint.textContent = "Tip: choose the correct pronoun for the blank.";
    hint.className = "hint";
    exp.style.display = "none";
    return;
  }

  // highlight chosen pill
  const labels = [...document.getElementById(`opts-${idx}`).querySelectorAll(".pill")];
  const chosenLabel = labels.find(l => l.querySelector("input").value === picked);

  if(picked === q.answer){
    chosenLabel.classList.add("correct");
    hint.textContent = "âœ“ Correct";
    hint.className = "hint ok";
    exp.style.display = "none"; // keep explanation for final checkAll
  } else {
    chosenLabel.classList.add("wrong");
    hint.textContent = `âœ— Not correct. Hint: correct answer starts with "${q.answer[0]}"`;
    hint.className = "hint bad";
    exp.style.display = "none";
  }
}

function checkAll(){
  let score = 0;
  const wrongItems = [];

  questions.forEach((q, idx) => {
    const picked = getSelected(idx);
    const hint = document.getElementById(`hint-${idx}`);
    const exp = document.getElementById(`exp-${idx}`);
    setPillsNeutral(idx);

    const labels = [...document.getElementById(`opts-${idx}`).querySelectorAll(".pill")];
    const chosenLabel = picked ? labels.find(l => l.querySelector("input").value === picked) : null;
    const correctLabel = labels.find(l => l.querySelector("input").value === q.answer);

    if(picked === q.answer){
      score++;
      if(chosenLabel) chosenLabel.classList.add("correct");
      hint.textContent = "âœ“ Correct";
      hint.className = "hint ok";
      exp.style.display = "none";
    } else {
      if(chosenLabel) chosenLabel.classList.add("wrong");
      correctLabel.classList.add("correct");
      hint.textContent = `âœ— Correct answer: ${q.answer}`;
      hint.className = "hint bad";
      exp.style.display = "block";

      wrongItems.push(`${idx+1}. Correct: <b>${q.answer}</b> â€” ${q.explain}`);
    }
  });

  document.getElementById("score").textContent = `Score: ${score} / ${questions.length}`;

  const box = document.getElementById("answersBox");
  box.style.display = "block";
  box.innerHTML = wrongItems.length
    ? `<b>Wrong Items (Correct Answers + Explanation):</b><br><br>${wrongItems.join("<br><br>")}`
    : `<b>Excellent!</b> All answers are correct ğŸ‰`;
}

function resetAll(){
  questions.forEach((q, idx) => {
    document.querySelectorAll(`input[name="q${idx}"]`).forEach(r => r.checked = false);
    setPillsNeutral(idx);
    const hint = document.getElementById(`hint-${idx}`);
    const exp = document.getElementById(`exp-${idx}`);
    hint.textContent = "Tip: choose the correct pronoun for the blank.";
    hint.className = "hint";
    exp.style.display = "none";
  });
  document.getElementById("score").textContent = "";
  const box = document.getElementById("answersBox");
  box.style.display = "none";
  box.innerHTML = "";
}
</script>
</body>
</html>
